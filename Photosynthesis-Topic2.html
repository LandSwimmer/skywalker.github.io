<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Science Web</title>
  <link rel="stylesheet" href="topic2-style.css">
</head>
<body>
  
  <header>
    <h1>Complex Science Stuff</h1>
    <button id="sidebar-toggle">Topics</button>
  </header>
  
  <main>
    <div class="sidebar">
      <div>
        <h3>Topics</h3>
        <nav>
          <ul>
            <li><a href="index.html">Photosynthesis</a></li>
            <ul>
              <li><a href="Photosynthesis-Topic1.html">Where Photosynthesis Happens</a></li>
              <li><a href="Photosynthesis-Topic2.html">Stages of Photosynthesis</a></li>
              <li><a href="Photosynthesis-Topic3.html">What Affects Photosynthesis</a></li>
            </ul>
          </ul>
        </nav>

        </div>
    </div>

    <div class="content">
      <div class="img-container ld-images">
        <div>
          <img src="Step1.png" title="Step 1 of Light-Dependent Reactions" alt="Image of First Step of Light-Dependent Reactions">
          <div class="buttons">
            <button>Next</button>
          </div>
        </div>

        <div>
          <img src="Step2.png" title="Step 2 of Light-Dependent Reactions" alt="Image of Second Step of Light-Dependent Reactions">
          <div class="buttons">
            <button>Back</button>
            <button>Next</button>
          </div>
        </div>

        <div>
          <img src="Step3.png" title="Step 3 of Light-Dependent Reactions" alt="Image of Third Step of Light-Dependent Reactions">
          <div class="buttons">
            <button>Back</button>
            <button>Next</button>
          </div>
        </div>

        <div>
          <img src="Step4.png" title="Step 4 of Light-Dependent Reactions" alt="Image of Fourth Step of Light-Dependent Reactions">
          <div class="buttons">
            <button>Back</button>
            <button>Next</button>
          </div>
        </div>
        
        <div>
          <img src="Step5.png" title="Step 5 of Light-Dependent Reactions" alt="Image of Fifth Step of Light-Dependent Reactions">
          <div class="buttons">
            <button>Back</button>
            <button>Next</button>
          </div>
        </div>

        <div>
          <img src="Step6.png" title="Step 6 of Light-Dependent Reactions" alt="Image of Sixth Step of Light-Dependent Reactions">
          <div class="buttons">
            <button>Back</button>
            <button>Next</button>
          </div>
        </div>

        <div>
          <img src="Step7.png" title="Step 7 of Light-Dependent Reactions" alt="Image of Seventh Step of Light-Dependent Reactions">
          <div class="buttons">
            <button>Back</button>
            <button>Return</button>
          </div>
        </div>
      </div>
      <div class="img-container li-images">
        <div>
          <img src="S1.png" title="Step 1 of Light-Independent Reactions" alt="Image of First Step of Light-Independent Reactions">
          <div class="buttons">
            <button>Next</button>
          </div>
        </div>

        <div>
          <img src="S2.png" title="Step 2 of Light-Independent Reactions" alt="Image of Second Step of Light-Independent Reactions">
          <div class="buttons">
            <button>Back</button>
            <button>Next</button>
          </div>
        </div>

        <div>
          <img src="S3.png" title="Step 3 of Light-Independent Reactions" alt="Image of Third Step of Light-Independent Reactions">
          <div class="buttons">
            <button>Back</button>
            <button>Next</button>
          </div>
        </div>

        <div>
          <img src="S4.png" title="Step 4 of Light-Independent Reactions" alt="Image of Fourth Step of Light-Independent Reactions">
          <div class="buttons">
            <button>Back</button>
            <button>Next</button>
          </div>
        </div>
        
        <div>
          <img src="S5.png" title="Step 5 of Light-Independent Reactions" alt="Image of Fifth Step of Light-Independent Reactions">
          <div class="buttons">
            <button>Back</button>
            <button>Next</button>
          </div>
        </div>
      </div>

    </div>

    <div class="infos">
      <div>
        <h2>The Two Stages of Photosynthesis</h2>
        <p>Photosynthesis occurs in two main stages that work together to produce food for the plant. Each stage takes place in a different part of the chloroplast and has a specific role in converting light energy into chemical energy.</p>
        <div class="select-div">
          <input type="radio" id="lightdependent" name="stage" checked>
          <label for="lightdependent">Light-Dependent Reactions</label>
          <input type="radio" id="lightindependent" name="stage">
          <label for="lightindependent">Calvin Cycle</label>
        </div>
      </div>

      <div class="light-dependent">
        <h2>What is Light-Dependent Reactions</h2>
        <p>The light-dependent reactions are the first stage of photosynthesis. They use sunlight to produce energy molecules needed for the next stage of photosynthesis.</p>
      </div>
      <div class="light-dependent">
        <h2>Steps of the Light-Dependent Reactions</h2>
        <dl>
          <dt>1. Light Absorption</dt>
          <dd>Light energy from the sun is absorbed by chlorophyll in the thylakoid membranes, exciting electrons and starting the process.</dd>

          <dt>2. Water Splitting (Photolysis)</dt>
          <dd>Water molecules are split into hydrogen ions, electrons, and oxygen using light energy.</dd>

          <dt>3. Oxygen Release</dt>
          <dd>Oxygen, a byproduct of water splitting, is released from the leaf into the atmosphere through the stomata.</dd>

          <dt>4. Energy Transfer</dt>
          <dd>The energized electrons move through a series of proteins in the thylakoid membrane, releasing energy.</dd>

          <dt>5. ATP Formation</dt>
          <dd>The released energy is used to produce ATP, a molecule that stores energy for the plant.</dd>

          <dt>6. NADPH Formation</dt>
          <dd>High-energy electrons combine with hydrogen ions to form NADPH, another energy-carrying molecule.</dd>

          <dt>7. Energy Delivery to the Calvin Cycle</dt>
          <dd>ATP and NADPH are sent to the stroma, where they will be used in the Calvin Cycle to make glucose.</dd>
        </dl>
      </div>
      <div class="light-dependent input-output">
        <h2>What goes in and what comes out</h2>

        <div>
          <h3>Inputs</h3>
          <ul>
            <li>Light Energy</li>
            <li>Water (H₂O)</li>
            <li>ADP and NADP⁺</li>
          </ul>
        </div>

        <div>
          <h3>Outputs</h3>
          <ul>
            <li>Oxygen (O₂)</li>
            <li>ATP</li>
            <li>NADPH</li>
          </ul>
        </div>
      </div>

      <div class="calvin-cycle">
        <h2>What is Calvin Cycle<br>(Light-Independent Reaction)</h2>
        <p>The Calvin Cycle is the second, light-independent stage of photosynthesis, occurring in the stroma of the chloroplast, where energy from ATP and NADPH is used to convert carbon dioxide into glucose.</p>
      </div>
      <div class="calvin-cycle">
        <h2>Steps of the Light-Dependent Reactions</h2>
        <dl>
          <dt>1. Carbon Fixation</dt>
          <dd>Carbon dioxide from the air enters the stroma of the chloroplast and combines with a 5-carbon molecule called RuBP, forming a 6-carbon compound that immediately splits into two 3-carbon molecules called 3-PGA.</dd>

          <dt>2. Reduction Phase</dt>
          <dd>The 3-PGA molecules are converted into a higher-energy 3-carbon sugar called G3P using energy from ATP and electrons from NADPH produced in the light-dependent reactions.</dd>

          <dt>3. Glucose Formation</dt>
          <dd>Some G3P molecules leave the cycle and are used to form glucose and other sugars that the plant can use for energy and growth.</dd>

          <dt>4. Regeneration of RuBP</dt>
          <dd>The remaining G3P molecules are recycled to regenerate RuBP, the 5-carbon molecule that allows the cycle to continue, ensuring the Calvin Cycle can keep processing more carbon dioxide.</dd>

          <dt>5. Energy Recycling</dt>
          <dd>During the cycle, ATP is converted back to ADP + Pi, and NADPH is converted back to NADP⁺, which are sent back to the light-dependent reactions to be re-energized.</dd>
        </dl>
      </div>
      <div class="calvin-cycle input-output">
        <h2>What goes in and what comes out</h2>

        <div>
          <h3>Inputs</h3>
          <ul>
            <li>Carbon Dioxide (CO₂)</li>
            <li>ATP</li>
            <li>NADPH</li>
          </ul>
        </div>

        <div>
          <h3>Outputs</h3>
          <ul>
            <li>Glucose (C₆H₁₂O₆)</li>
            <li>ADP + Pi</li>
            <li>NADP⁺</li>
          </ul>
        </div>
      </div>
    </div>
  </main>

</body>

<script>
// Containers and slides for both sliders
const ldContainer = document.querySelector('.ld-images');
const liContainer = document.querySelector('.li-images');
const ldSlides = document.querySelectorAll('.ld-images > div');
const liSlides = document.querySelectorAll('.li-images > div');
let currentIndex = 0;
let activeContainer = ldContainer; // Default to Light-Dependent
let activeSlides = ldSlides; // Default slides
let totalSlides = 7; // Default for LD

// Function to get the active container and slides based on radio
function updateActiveSlider() {
  const ldRadio = document.getElementById('lightdependent');
  if (ldRadio.checked) {
    activeContainer = ldContainer;
    activeSlides = ldSlides;
    totalSlides = 7;
  } else {
    activeContainer = liContainer;
    activeSlides = liSlides;
    totalSlides = 5;
  }
  // Reset index and position on switch
  currentIndex = 0;
  updatePosition();
  clearImageHighlights();
}

// Function to update the container's position (slide)
function updatePosition() {
  activeContainer.style.transform = `translateX(-${(currentIndex * 100) / totalSlides}%)`;
}

// Function to clear highlights from all <dd> in .infos
function clearInfoHighlights() {
  document.querySelectorAll('.infos dd').forEach(dd => {
    dd.classList.remove('highlight');
  });
}

// Function to highlight <dd> based on <dt> text (works for both sets)
function highlightInfo(dtTexts) {
  dtTexts.forEach(text => {
    const dt = Array.from(document.querySelectorAll('.infos dt')).find(dt => dt.textContent.trim() === text);
    if (dt) {
      const dd = dt.nextElementSibling;
      if (dd && dd.tagName === 'DD') {
        dd.classList.add('highlight');
      }
    }
  });
}

// Function to clear highlights from all images in active container
function clearImageHighlights() {
  activeContainer.querySelectorAll('img').forEach(img => {
    img.classList.remove('highlight');
  });
}

// Function to highlight an image by index in active container
function highlightImage(index) {
  clearImageHighlights();
  const img = activeSlides[index].querySelector('img');
  if (img) {
    img.classList.add('highlight');
  }
}

// Add click listeners to images in both containers (highlight info)
document.querySelectorAll('.img-container img').forEach((img, index) => {
  img.addEventListener('click', () => {
    const title = img.getAttribute('title');
    clearInfoHighlights();
    clearClickedHighlights();
    
    // Determine which set and highlight accordingly
    if (title.includes('Light-Dependent')) {
      switch (title) {
        case 'Step 1 of Light-Dependent Reactions':
          highlightInfo(['1. Light Absorption']);
          break;
        case 'Step 2 of Light-Dependent Reactions':
          highlightInfo(['2. Water Splitting (Photolysis)']);
          break;
        case 'Step 3 of Light-Dependent Reactions':
          highlightInfo(['3. Oxygen Release']);
          break;
        case 'Step 4 of Light-Dependent Reactions':
          highlightInfo(['4. Energy Transfer']);
          break;
        case 'Step 5 of Light-Dependent Reactions':
          highlightInfo(['5. ATP Formation']);
          break;
        case 'Step 6 of Light-Dependent Reactions':
          highlightInfo(['6. NADPH Formation']);
          break;
        case 'Step 7 of Light-Dependent Reactions':
          highlightInfo(['7. Energy Delivery to the Calvin Cycle']);
          break;
      }
    } else if (title.includes('Light-Independent')) {
      switch (title) {
        case 'Step 1 of Light-Independent Reactions':
          highlightInfo(['1. Carbon Fixation']);
          break;
        case 'Step 2 of Light-Independent Reactions':
          highlightInfo(['2. Reduction Phase']);
          break;
        case 'Step 3 of Light-Independent Reactions':
          highlightInfo(['3. Glucose Formation']);
          break;
        case 'Step 4 of Light-Independent Reactions':
          highlightInfo(['4. Regeneration of RuBP']);
          break;
        case 'Step 5 of Light-Independent Reactions':
          highlightInfo(['5. Energy Recycling']);
          break;
      }
    }
  });
});

// Function to clear clicked highlights from <dt> and <dd>
function clearClickedHighlights() {
  document.querySelectorAll('.infos dt, .infos dd').forEach(el => {
    el.classList.remove('clicked');
  });
}

// Add click listeners to <dt> and <dd> in .infos (slide to image and highlight it)
document.querySelectorAll('.infos dt, .infos dd').forEach(el => {
  el.addEventListener('click', () => {
    let dtText = '';
    
    if (el.tagName === 'DT') {
      dtText = el.textContent.trim();
    } else if (el.tagName === 'DD') {
      const prevDt = el.previousElementSibling;
      if (prevDt && prevDt.tagName === 'DT') {
        dtText = prevDt.textContent.trim();
      }
    }
    
    if (dtText) {
      let targetIndex = -1;
      
      // Map <dt> text to slide index (for active set)
      if (activeContainer === ldContainer) {
        switch (dtText) {
          case '1. Light Absorption':
            targetIndex = 0;
            break;
          case '2. Water Splitting (Photolysis)':
            targetIndex = 1;
            break;
          case '3. Oxygen Release':
            targetIndex = 2;
            break;
          case '4. Energy Transfer':
            targetIndex = 3;
            break;
          case '5. ATP Formation':
            targetIndex = 4;
            break;
          case '6. NADPH Formation':
            targetIndex = 5;
            break;
          case '7. Energy Delivery to the Calvin Cycle':
            targetIndex = 6;
            break;
        }
      } else if (activeContainer === liContainer) {
        switch (dtText) {
          case '1. Carbon Fixation':
            targetIndex = 0;
            break;
          case '2. Reduction Phase':
            targetIndex = 1;
            break;
          case '3. Glucose Formation':
            targetIndex = 2;
            break;
          case '4. Regeneration of RuBP':
            targetIndex = 3;
            break;
          case '5. Energy Recycling':
            targetIndex = 4;
            break;
        }
      }
      
      if (targetIndex !== -1) {
        currentIndex = targetIndex;
        updatePosition();
        highlightImage(targetIndex);
        clearClickedHighlights();
        el.classList.add('clicked');
        
        if (el.tagName === 'DD') {
          clearInfoHighlights();
        }
      }
    }
  });
});

// Button listeners (Next, Back, Return) for active container
document.querySelectorAll('button').forEach(button => {
  button.addEventListener('click', () => {
    const action = button.textContent.trim();
    if (action === 'Next' && currentIndex < totalSlides - 1) {
      currentIndex++;
    } else if (action === 'Back' && currentIndex > 0) {
      currentIndex--;
    } else if (action === 'Return') {
      currentIndex = 0;
    }
    updatePosition();
    clearImageHighlights();
  });
});

// Radio listeners to switch sliders
document.getElementById('lightdependent').addEventListener('change', updateActiveSlider);
document.getElementById('lightindependent').addEventListener('change', updateActiveSlider);

// Initial setup
updateActiveSlider();
// Select the toggle button and sidebar
const sidebarToggle = document.getElementById('sidebar-toggle');
const sidebar = document.querySelector('.sidebar');

// Add click event to toggle the sidebar
sidebarToggle.addEventListener('click', () => {
  sidebar.classList.toggle('show'); // Toggle the 'show' class
});
</script>

</html>
