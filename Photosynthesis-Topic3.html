<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Science Web</title>
  <link rel="stylesheet" href="topic3-style.css">
</head>
<body>

  <header>
    <h1>Complex Science Stuff</h1>
    <button id="sidebar-toggle">Links</button>
  </header>
  
  <main>
    <div class="sidebar">
      <div>
        <h3>Topics</h3>

        <nav>

          <ul>
            <li><a href="index.html">Photosynthesis</a></li>
            <ul>
              <li><a href="Photosynthesis-Topic1.html">Where Photosynthesis Happens</a></li>
              <li><a href="Photosynthesis-Topic2.html">Stages of Photosynthesis</a></li>
              <li><a href="Photosynthesis-Topic3.html">What Affects Photosynthesis</a></li>
            </ul>


          </ul>

        </nav>

        </div>
    </div>

    <div class="content">

        <div class="img-container">
          <div>
            <div class="interactive-container">
              <img src="sun1.png" title="Sun" alt="Image of Sun">
              <div class="interactive-buttons">
                <h3>1</h3>
                <button>Decrease</button>
                <button>Increase</button>
                <button>Start Photosynthesis</button>
              </div>
              <div class="interactive-info">
                <h3>No light - photosynthesis stops</h3>
                <p>With little to no sunlight, photosynthesis happens very slowly or stops because there is not enough energy to drive the reactions.</p>
              </div>
            </div>
            <div class="buttons">
              <button>Next</button>
            </div>
          </div>

          <div>
            <div class="interactive-container">
              <img src="co21.png" title="CO2" alt="Image of CO2">
              <div class="interactive-buttons">
                <h3>1</h3>
                <button>Decrease</button>
                <button>Increase</button>
                <button>Start Photosynthesis</button>
              </div>
              <div class="interactive-info">
                <h3>Very low CO‚ÇÇ ‚Äî photosynthesis is greatly reduced</h3>
                <p>With very low carbon dioxide, glucose production is limited and photosynthesis is greatly reduced.</p>
              </div>
            </div>
            <div class="buttons">
              <button>Back</button>
              <button>Next</button>
            </div>
          </div>

          <div>
            <div class="interactive-container">
              <img src="water1.png" title="Water" alt="Image of Water Droplet">
              <div class="interactive-buttons">
                <h3>1</h3>
                <button>Decrease</button>
                <button>Increase</button>
                <button>Start Photosynthesis</button>
              </div>
              <div class="interactive-info">
                <h3>Severe water shortage ‚Äî photosynthesis stops</h3>
                <p>Without enough water, the light-dependent reactions stop and photosynthesis cannot occur.</p>
              </div>
            </div>
            <div class="buttons">
              <button>Back</button>
              <button>Next</button>
            </div>
          </div>

          <div>
            <div class="interactive-container">
              <img src="temp1.png" title="Temperature" alt="Image of Thermostat">
              <div class="interactive-buttons">
                <h3>1</h3>
                <button>Decrease</button>
                <button>Increase</button>
                <button>Start Photosynthesis</button>
              </div>
              <div class="interactive-info">
                <h3>Too cold ‚Äî photosynthesis is greatly reduced</h3>
                <p>Very low temperatures slow enzyme activity, greatly reducing photosynthesis.</p>
              </div>
            </div>
            <div class="buttons">
              <button>Back</button>
              <button>Return</button>
            </div>
          </div>
          
        </div>

    </div>

    <div class="infos">
      <div>
        <h2>What can affect the process of Photosynthesis?</h2>
        <p>Photosynthesis does not always happen at the same rate. Several environmental factors can increase or decrease how fast a plant can make food. These factors affect how efficiently plants capture light, absorb carbon dioxide, and carry out chemical reactions.</p>
      </div>
      <div>
        <h2>When Photosynthesis Speeds Up or Slows Down</h2>
        <dl>
          <dt>‚òÄÔ∏è Light Intensity</dt>
          <dd>Light provides the energy needed for photosynthesis. As light intensity increases, the rate of photosynthesis also increases because more energy is available to drive the reactions. However, once the plant reaches its maximum capacity, increasing light further will no longer increase the rate.</dd>

          <dt>üå´Ô∏è Carbon Dioxide (CO‚ÇÇ) Concentration</dt>
          <dd>Carbon dioxide is a key raw material used to produce glucose during the Calvin Cycle. Higher levels of carbon dioxide allow photosynthesis to occur faster, but only up to a certain point. When other factors become limiting, the rate will no longer increase.</dd>

          <dt>üíß Water Availability</dt>
          <dd>Water is essential for the light-dependent reactions, where it is split to release oxygen and provide electrons. When water is scarce, photosynthesis slows down or stops, and plants may close their stomata to prevent water loss.</dd>

          <dt>üå°Ô∏è Temperature</dt>
          <dd>Photosynthesis is controlled by enzymes that work best within an optimal temperature range. Low temperatures slow down enzyme activity, while very high temperatures can damage enzymes and reduce the rate of photosynthesis.</dd>

        </dl>
      </div>
    </div>
  </main>

</body>

<script>
// Existing variables (from your slider JS)
const container = document.querySelector('.img-container');
const slides = document.querySelectorAll('.img-container > div');
let currentIndex = 0;

// Function to update the container's position (slide)
function updatePosition() {
  container.style.transform = `translateX(-${(currentIndex * 100) / 4}%)`;
}

// Function to clear highlights from all <dd> in .infos
function clearInfoHighlights() {
  document.querySelectorAll('.infos dd').forEach(dd => {
    dd.classList.remove('highlight');
  });
}

// Function to highlight <dd> based on <dt> text
function highlightInfo(dtTexts) {
  dtTexts.forEach(text => {
    const dt = Array.from(document.querySelectorAll('.infos dt')).find(dt => dt.textContent.trim() === text);
    if (dt) {
      const dd = dt.nextElementSibling;
      if (dd && dd.tagName === 'DD') {
        dd.classList.add('highlight');
      }
    }
  });
}

// Function to clear highlights from all images
function clearImageHighlights() {
  document.querySelectorAll('.img-container img').forEach(img => {
    img.classList.remove('highlight');
  });
}

// Function to highlight an image by index
function highlightImage(index) {
  clearImageHighlights();
  const img = slides[index].querySelector('img');
  if (img) {
    img.classList.add('highlight');
  }
}

// Add click listeners to images (existing logic: highlight info)
document.querySelectorAll('.img-container img').forEach((img, index) => {
  img.addEventListener('click', () => {
    const title = img.getAttribute('title');
    clearInfoHighlights(); // Clear 'highlight' from <dd>s
    clearClickedHighlights(); // New: Clear 'clicked' from <dt>/<dd>s
    
    switch (title) {
      case 'Sun':
        highlightInfo(['‚òÄÔ∏è Light Intensity']);
        break;
      case 'CO2':
        highlightInfo(['üå´Ô∏è Carbon Dioxide (CO‚ÇÇ) Concentration']);
        break;
      case 'Water':
        highlightInfo(['üíß Water Availability']);
        break;
      case 'Temperature':
        highlightInfo(['üå°Ô∏è Temperature']);
        break;
    }
  });
});

// Function to clear clicked highlights from <dt> and <dd>
function clearClickedHighlights() {
  document.querySelectorAll('.infos dt, .infos dd').forEach(el => {
    el.classList.remove('clicked');
  });
}

// Updated: Add click listeners to <dt> and <dd> in .infos (slide to image and highlight it)
document.querySelectorAll('.infos dt, .infos dd').forEach(el => {
  el.addEventListener('click', () => {
    let dtText = '';
    
    if (el.tagName === 'DT') {
      dtText = el.textContent.trim();
    } else if (el.tagName === 'DD') {
      // For <dd>, get the text from the previous <dt>
      const prevDt = el.previousElementSibling;
      if (prevDt && prevDt.tagName === 'DT') {
        dtText = prevDt.textContent.trim();
      }
    }
    
    if (dtText) {
      let targetIndex = -1;
      
      // Map <dt> text to slide index (same as before)
      switch (dtText) {
        case '‚òÄÔ∏è Light Intensity':
          targetIndex = 0;
          break;
        case 'üå´Ô∏è Carbon Dioxide (CO‚ÇÇ) Concentration':
          targetIndex = 1;
          break;
        case 'üíß Water Availability':
          targetIndex = 2;
          break;
        case 'üå°Ô∏è Temperature':
          targetIndex = 3;
          break;
      }
      
      if (targetIndex !== -1) {
        currentIndex = targetIndex;
        updatePosition(); // Slide to the image
        clearClickedHighlights(); // Clear previous clicked highlights
        el.classList.add('clicked'); // Highlight the clicked <dt> or <dd>
        
        // New: If clicking a <dd>, also clear the 'highlight' from <dd>s (set by image clicks)
        if (el.tagName === 'DD') {
          clearInfoHighlights();
        }
      }
    }
  });
});

// Existing: Button listeners (Next, Back, Return) - unchanged
document.querySelectorAll('button').forEach(button => {
  button.addEventListener('click', () => {
    const action = button.textContent.trim();
    if (action === 'Next' && currentIndex < 3) {
      currentIndex++;
    } else if (action === 'Back' && currentIndex > 0) {
      currentIndex--;
    } else if (action === 'Return') {
      currentIndex = 0;
    }
    updatePosition();
    clearClickedHighlights();
    clearImageHighlights(); // Optional: Clear image highlights on button navigation
  });
});





// Data for each factor's levels (unchanged)
const factorData = {
  'Sun': {
    1: { label: 'Too little light ‚Äî photosynthesis stops', desc: 'With little to no sunlight, photosynthesis happens very slowly or stops because there is not enough energy to drive the reactions.' },
    2: { label: 'Low light ‚Äî photosynthesis is slow', desc: 'As light intensity increases, photosynthesis begins but remains slow due to limited energy.' },
    3: { label: 'Moderate light ‚Äî photosynthesis increases', desc: 'Moderate sunlight provides enough energy for photosynthesis to increase steadily.' },
    4: { label: 'Optimal light ‚Äî maximum photosynthesis', desc: 'At the optimal light level, photosynthesis reaches its highest rate.' },
    5: { label: 'Too much light ‚Äî photosynthesis decreases', desc: 'Excessive sunlight can damage chlorophyll, causing photosynthesis to decrease.' }
  },
  'CO2': {
    1: { label: 'Very low CO‚ÇÇ ‚Äî photosynthesis is greatly reduced', desc: 'With very low carbon dioxide, glucose production is limited and photosynthesis is greatly reduced.' },
    2: { label: 'Low CO‚ÇÇ ‚Äî photosynthesis is limited', desc: 'Increasing carbon dioxide allows photosynthesis to occur but at a limited rate.' },
    3: { label: 'Moderate CO‚ÇÇ ‚Äî photosynthesis is normal', desc: 'Moderate carbon dioxide levels allow photosynthesis to proceed normally.' },
    4: { label: 'Optimal CO‚ÇÇ ‚Äî maximum photosynthesis', desc: 'At optimal carbon dioxide levels, photosynthesis reaches its maximum rate.' },
    5: { label: 'Excess CO‚ÇÇ ‚Äî no further increase', desc: 'Excess carbon dioxide does not increase photosynthesis because other factors become limiting.' }
  },
  'Water': {
    1: { label: 'Severe water shortage ‚Äî photosynthesis stops', desc: 'Without enough water, the light-dependent reactions stop and photosynthesis cannot occur.' },
    2: { label: 'Low water ‚Äî photosynthesis is reduced', desc: 'Limited water causes stomata to close, reducing photosynthesis.' },
    3: { label: 'Adequate water ‚Äî photosynthesis is normal', desc: 'Adequate water allows photosynthesis to occur at a steady rate.' },
    4: { label: 'Optimal water ‚Äî efficient photosynthesis', desc: 'Optimal water levels support efficient and continuous photosynthesis.' },
    5: { label: 'Excess water ‚Äî photosynthesis decreases', desc: 'Too much water can stress the plant and lower the rate of photosynthesis.' }
  },
  'Temperature': {
    1: { label: 'Too cold ‚Äî photosynthesis is greatly reduced', desc: 'Very low temperatures slow enzyme activity, greatly reducing photosynthesis.' },
    2: { label: 'Cool ‚Äî photosynthesis is slow', desc: 'Cool temperatures allow photosynthesis but at a slow rate.' },
    3: { label: 'Moderate temperature ‚Äî photosynthesis increases', desc: 'Moderate temperatures allow enzymes to work efficiently, increasing photosynthesis.' },
    4: { label: 'Optimal temperature ‚Äî maximum photosynthesis', desc: 'At the optimal temperature, enzymes work best and photosynthesis is fastest.' },
    5: { label: 'Too hot ‚Äî photosynthesis decreases or stops', desc: 'High temperatures can damage enzymes, causing photosynthesis to decrease or stop.' }
  }
};

// Function to update image with fade animation (unchanged)
function updateImage(img, newSrc) {

    img.src = newSrc; // Change src
}

// Loop through each interactive container
document.querySelectorAll('.interactive-container').forEach(container => {
  const img = container.querySelector('img');
  const levelH3 = container.querySelector('.interactive-buttons h3');
  const infoDiv = container.querySelector('.interactive-info');
  const infoH3 = infoDiv.querySelector('h3');
  const infoP = infoDiv.querySelector('p');
  const increaseBtn = container.querySelector('button:nth-child(3)'); // Increase
  const decreaseBtn = container.querySelector('button:nth-child(2)'); // Decrease
  const startBtn = container.querySelector('button:nth-child(4)'); // Start Photosynthesis
  
  let currentLevel = 1; // Start at 1
  const factor = img.getAttribute('title'); // 'Sun', 'CO2', etc.
  const baseSrc = img.src.replace(/\d+\.png$/, ''); // e.g., 'sun'
  
  // Function to update level and image only (no info)
  function updateLevelAndImage() {
    levelH3.textContent = currentLevel;
    const newSrc = baseSrc + currentLevel + '.png'; // e.g., sun2.png
    updateImage(img, newSrc);
  }
  
  // Function to update info with animation
  function updateInfoWithAnimation() {
    const data = factorData[factor][currentLevel];
    infoDiv.classList.add('fade-out'); // Fade out
    setTimeout(() => {
      infoH3.textContent = data.label;
      infoP.textContent = data.desc;
      infoDiv.classList.remove('fade-out'); // Fade back in
    }, 250); // Match transition time
  }
  
  // Increase button: Only level and image
  increaseBtn.addEventListener('click', () => {
    if (currentLevel < 5) {
      currentLevel++;
      updateLevelAndImage();
    } else {
      levelH3.textContent = "Cannot go over 5";
      levelH3.style.color = "red";
      setTimeout(() => {
        levelH3.style.color = "black";
        levelH3.textContent = currentLevel;
      }, 500);
    }
  });
  
  // Decrease button: Only level and image
  decreaseBtn.addEventListener('click', () => {
    if (currentLevel > 1) {
      currentLevel--;
      updateLevelAndImage();
    } else {
      levelH3.textContent = "Cannot go below 1";
      levelH3.style.color = "red";
      setTimeout(() => {
        levelH3.style.color = "black";
        levelH3.textContent = currentLevel;
      }, 500);
    }
  });
  
  // Start Photosynthesis button: Update info with animation
  startBtn.addEventListener('click', () => {
    updateInfoWithAnimation();
    // Optional: Add pulse or other effect
    img.classList.add('pulse');
    setTimeout(() => img.classList.remove('pulse'), 500);
  });
  
  // Initial setup: Set level/image, but info starts with level 1 data (no animation)
  updateLevelAndImage();
  const initialData = factorData[factor][1];
  infoH3.textContent = initialData.label;
  infoP.textContent = initialData.desc;
});
function updateImage(img, newSrc) {
  img.style.opacity = '0';
  img.style.transform = 'scale(0.95)'; // Shrink slightly
  img.src = newSrc; // Change src
  setTimeout(() => {
    img.style.opacity = '1';
    img.style.transform = 'scale(1)'; // Grow back
  }, 250); // Half the transition time
}
// Select the toggle button and sidebar
const sidebarToggle = document.getElementById('sidebar-toggle');
const sidebar = document.querySelector('.sidebar');

// Add click event to toggle the sidebar
sidebarToggle.addEventListener('click', () => {
  sidebar.classList.toggle('show'); // Toggle the 'show' class
});
</script>

</html>